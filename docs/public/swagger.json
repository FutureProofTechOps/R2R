{
  "openapi": "3.1.0",
  "info": {
    "title": "R2R Application API",
    "description": "API documentation for the R2R application, outlining the endpoints and operations available.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://your-app-url"
    }
  ],
  "paths": {
    "/ingest_documents/": {
      "post": {
        "summary": "Ingest Documents",
        "operationId": "ingest_documents",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/IngestDocumentsRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "example": { "results": "Entries upserted successfully." }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/ingest_files/": {
      "post": {
        "summary": "Ingest Files",
        "operationId": "ingest_files",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/IngestFilesRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "example": {
                  "results": [
                    "File 'example.pdf' processed successfully",
                    "File 'example.txt' processed successfully"
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/search/": {
      "post": {
        "summary": "Search",
        "operationId": "search",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SearchRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "example": {
                  "results": [
                    {
                      "document_id": "doc_1",
                      "title": "Example Document",
                      "content": "This is an example document."
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/rag/": {
      "post": {
        "summary": "RAG",
        "operationId": "rag",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RAGRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "example": {
                  "results": {
                    "document_id": "doc_1",
                    "content": "Generated response based on the query and context."
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/delete/": {
      "delete": {
        "summary": "Delete",
        "operationId": "delete",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/DeleteRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "example": { "results": "Entries deleted successfully." }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/get_user_ids/": {
      "get": {
        "summary": "Get User IDs",
        "operationId": "get_user_ids",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "example": { "results": ["user_1", "user_2"] }
              }
            }
          }
        }
      }
    },
    "/get_user_document_data/": {
      "post": {
        "summary": "Get User Document Data",
        "operationId": "get_user_document_data",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UserDocumentRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "example": {
                  "results": [
                    {
                      "document_id": "doc_1",
                      "title": "Example Document",
                      "content": "This is an example document."
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/get_logs/": {
      "post": {
        "summary": "Get Logs",
        "operationId": "get_logs",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/LogsRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "example": {
                  "results": [
                    {
                      "run_id": "run_1",
                      "run_type": "ingestion",
                      "entries": [
                        { "key": "pipeline_type", "value": "ingestion" },
                        { "key": "status", "value": "success" }
                      ]
                    }
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/evaluate/": {
      "post": {
        "summary": "Evaluate",
        "operationId": "evaluate",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/EvalRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "example": {
                  "results": {
                    "evaluation_score": 0.95,
                    "feedback": "Evaluation successful."
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "IngestDocumentsRequest": {
        "type": "object",
        "properties": {
          "documents": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/Document" }
          }
        },
        "required": ["documents"]
      },
      "IngestFilesRequest": {
        "type": "object",
        "properties": {
          "files": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "binary"
            }
          },
          "metadatas": {
            "type": "string",
            "title": "Metadatas",
            "default": "null"
          },
          "ids": {
            "type": "string",
            "title": "IDs",
            "default": "null"
          }
        },
        "required": ["files"]
      },
      "SearchRequest": {
        "type": "object",
        "properties": {
          "query": { "type": "string" },
          "search_filters": {
            "type": "string",
            "title": "Search Filters",
            "default": "null"
          },
          "search_limit": {
            "type": "integer",
            "title": "Search Limit",
            "default": 10
          }
        },
        "required": ["query"]
      },
      "RAGRequest": {
        "type": "object",
        "properties": {
          "message": { "type": "string" },
          "search_filters": {
            "type": "string",
            "title": "Search Filters",
            "default": "null"
          },
          "search_limit": {
            "type": "integer",
            "title": "Search Limit",
            "default": 10
          },
          "generation_config": {
            "type": "string",
            "title": "Generation Config",
            "default": "null"
          },
          "streaming": {
            "type": "boolean",
            "title": "Streaming",
            "default": false
          }
        },
        "required": ["message"]
      },
      "DeleteRequest": {
        "type": "object",
        "properties": {
          "key": { "type": "string" },
          "value": {
            "anyOf": [
              { "type": "boolean" },
              { "type": "integer" },
              { "type": "string" }
            ]
          }
        },
        "required": ["key", "value"]
      },
      "UserDocumentRequest": {
        "type": "object",
        "properties": {
          "user_id": { "type": "string" }
        },
        "required": ["user_id"]
      },
      "LogsRequest": {
        "type": "object",
        "properties": {
          "pipeline_type": { "type": "string", "default": "null" }
        }
      },
      "EvalRequest": {
        "type": "object",
        "properties": {
          "query": { "type": "string" },
          "context": { "type": "string" },
          "completion": { "type": "string" }
        },
        "required": ["query", "context", "completion"]
      },
      "Document": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "type": { "type": "string" },
          "data": { "type": "string" },
          "metadata": { "type": "object" }
        },
        "required": ["id", "type", "data"]
      },
      "HTTPValidationError": {
        "type": "object",
        "properties": {
          "detail": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/ValidationError" }
          }
        }
      },
      "ValidationError": {
        "type": "object",
        "properties": {
          "loc": {
            "type": "array",
            "items": {
              "anyOf": [
                { "type": "string" },
                { "type": "integer" }
              ]
            }
          },
          "msg": { "type": "string" },
          "type": { "type": "string" }
        },
        "required": ["loc", "msg", "type"]
      }
    }
  }
}
